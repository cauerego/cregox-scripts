<style>
  .sqs-gallery-container {
    display: none;
  }
</style>

<span id="gallery-background-overlay"></span>
<span id="gallery-hover-click-styles" class="remove-self">
  <div class="list">
    <p class="text-align-center gallery-hover-title"></p>
  </div>
  <div class="hover">
    <span class="fa-stack fa-lg">
      <i class="fa fa-square fa-stack-2x"></i>
      <i class="fa fa-search fa-stack-1x fa-inverse"></i>
    </span>
  </div>
  <div class="click">
    <span class="fa-stack fa-lg">
      <i class="fa fa-square fa-stack-2x"></i>
      <i class="fa fa-times fa-stack-1x fa-inverse"></i>
    </span>
  </div>
</span>

<script id="gallery-hover-click-title" author="cregox.com">
  var $galleryClickVisible = null;
  var $galleryHoverVisible = null;
  $(window).load(function(){
    var $titleGallery = $('script#gallery-hover-click-title').below('.sqs-block-gallery .sqs-gallery');
    var $galleryStyle = $('span#gallery-hover-click-styles');

    var $bgOver = $('#gallery-background-overlay');
    $bgOver.click(function(){
      if ($galleryClickVisible !== null) {
        $galleryClickVisible.hide('fast');
        $galleryClickVisible = null;
      }
      if ($galleryHoverVisible !== null) {
        $galleryHoverVisible.hide('fast');
        $galleryHoverVisible = null;
      }
      $bgOver.hide();
    });
    $bgOver.hide();

    $titleGallery.children('.image-wrapper').each(function(){
      var $image = $(this);
      var $meta = $(this).below('.meta');
      var $bigImage = $('<img src="'+ $image.find('img').attr('data-src') +'?format=500w">');

      var nameId = $meta.find('h3.meta-title').text();

      var $thisGallery = $galleryStyle.clone().insertBefore($image.parents('.sqs-block-content')).removeClass('remove-self');

      var $galClick = $thisGallery.find('div.click').prepend($image).append($meta);
      var $galHover = $thisGallery.find('div.hover').prepend($bigImage);

      var $pId = $thisGallery.find('p.gallery-hover-title');
      $pId.text(nameId);

      $pId.click(function(){
        if ($galleryClickVisible !== null) {
          if ($galleryClickVisible !== $galClick) {
            $galHover.show('fast');
            $galleryHoverVisible = $galHover;
          }
          $galleryClickVisible.hide('fast');
          $galleryClickVisible = null;
          $bgOver.hide();
        } else if ($galleryHoverVisible !== null) {
          $galleryHoverVisible.hide('fast');
          if ($galleryHoverVisible === $galHover) {
            $galleryHoverVisible = null;
            $galClick.show('fast');
            $galleryClickVisible = $galClick;
          } else {
            $galHover.show('fast');
            $galleryHoverVisible = $galHover;
          }
          $bgOver.show();
        } else {
          $galHover.show('fast');
          $galleryHoverVisible = $galHover;
          $bgOver.show();
        }
      });
      
      $galClick.click(function(){
        $galClick.hide('fast');
        $galleryClickVisible = null;
        $bgOver.hide();
      });
      $galHover.click(function(){
        $galHover.hide('fast');
        $galleryHoverVisible = null;
        $galClick.show('fast');
        if ($galleryClickVisible !== null) {
          $galleryClickVisible.hide('fast');
          $galleryClickVisible = null;
        }
        $galleryClickVisible = $galClick;
        $bgOver.show();
      });

      $pId.mouseenter(function(){
        if ($galleryClickVisible === null) {
          if ($galleryHoverVisible !== null) {
            $galleryHoverVisible.hide('fast');
            $galleryHoverVisible = null;
          }
          $galHover.show('fast');
          $galleryHoverVisible = $galHover;
          $bgOver.show();
        }
      });
    }); // each
    
    /* out for now, using CSS and static files
    $.fn.awesomeCursor.defaults.color = 'black';
    $.fn.awesomeCursor.defaults.outline = 'white';
    $.fn.awesomeCursor.defaults.hotspot = 'center';
    $('.hover').awesomeCursor('search');
    $('.click').awesomeCursor('times');
    $('#gallery-background-overlay').awesomeCursor('times');
    */
    
    // after everything is done here, it might be a good idea to show what have been previously hidden by css, just in case
    $('.sqs-gallery-container').show();
    
  });
</script>