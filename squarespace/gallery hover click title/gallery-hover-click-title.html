<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<style>
  .sqs-gallery-container {
    display: none;
  }
</style>

<span id="gallery-background-overlay"></span>
<span id="gallery-hover-click-styles" class="remove-self">
  <div class="list">
    <p class="text-align-center gallery-hover-title"></p>
  </div>
  <div class="hover">
    <span class="fa-stack fa-lg">
      <i class="fa fa-square fa-stack-2x"></i>
      <i class="fa fa-search fa-stack-1x fa-inverse"></i>
    </span>
  </div>
  <div class="click">
    <span class="fa-stack fa-lg">
      <i class="fa fa-square fa-stack-2x"></i>
      <i class="fa fa-times fa-stack-1x fa-inverse"></i>
    </span>
  </div>
</span>

<script id="gallery-hover-click-title" author="cregox.com">
  var $galleryClickVisible = null;
  var $galleryHoverVisible = null;
  $(window).load(function(){
    var $titleGallery = $('script#gallery-hover-click-title').below('.sqs-block-gallery .sqs-gallery');
    var $galleryStyle = $('span#gallery-hover-click-styles');

    var $bgOver = $('#gallery-background-overlay');
    $bgOver.click(function(){
      if ($galleryClickVisible !== null) {
        $galleryClickVisible.hide('fast');
        $galleryClickVisible = null;
      }
      if ($galleryHoverVisible !== null) {
        $galleryHoverVisible.hide('fast');
        $galleryHoverVisible = null;
      }
      $bgOver.hide();
    });
    $bgOver.hide();

    $titleGallery.children('.image-wrapper').each(function(){
      var $image = $(this);
      var $meta = $(this).below('.meta');
      var $bigImage = $('<img src="'+ $image.find('img').attr('src') +'">');

      var nameId = $meta.find('h3.meta-title').text();

      var $thisGallery = $galleryStyle.clone().insertBefore($image.parents('.sqs-block-content')).removeClass('remove-self');

      var $galClick = $thisGallery.find('div.click').prepend($image).append($meta);
      var $galHover = $thisGallery.find('div.hover').prepend($bigImage);

      var $pId = $thisGallery.find('p.gallery-hover-title');
      $pId.text(nameId);

      $pId.click(function(){
        if ($galleryClickVisible !== null) {
          $galleryClickVisible.hide('fast');
          $galleryClickVisible = null;
          $bgOver.hide();
        }
        if ( $galHover.is(':visible') ) {
          $galHover.hide('fast');
          $galleryHoverVisible = null;
          $galClick.show('fast');
          $galleryClickVisible = $galClick;
          $bgOver.show();
        } else if ( $galClick.is(':visible') ) {
          $galClick.hide('fast');
          $galleryClickVisible = null;
          $bgOver.hide();
        } else {
          $galHover.show('fast');
          $galleryHoverVisible = $galHover;
          $bgOver.show();
        }
      });
      $galClick.click(function(){
        $galClick.hide('fast');
        $galleryClickVisible = null;
        $bgOver.hide();
      });
      $galHover.click(function(){
        $galHover.hide('fast');
        $galleryHoverVisible = null;
        $galClick.show('fast');
        if ($galleryClickVisible !== null) {
          $galleryClickVisible.hide('fast');
          $galleryClickVisible = null;
        }
        $galleryClickVisible = $galClick;
        $bgOver.show();
      });

      $pId.mouseenter(function(){
        if ($galleryClickVisible === null) {
          if ($galleryHoverVisible !== null) {
            $galleryHoverVisible.hide('fast');
            $galleryHoverVisible = null;
          }
          $galHover.show('fast');
          $galleryHoverVisible = $galHover;
          $bgOver.show();
        }
      });
    }); // each
    
    // after everything is done here, it might be a good idea to show what have been previously hidden by css, just in case
    $('.sqs-gallery-container').show();
    
  });
  
(function( $ ){
 $.fn.below = function(sel) {
   var $result = $(sel).first();
   if ($result.length <= 0) {
     return $result;
   }
   $result = [];
   var thisIndex = $('*').index($(this));
   var selIndex = Number.MAX_VALUE; // Number.MAX_SAFE_INTEGER is not yet fully supported
   $(sel).each(function(i,val){
     var valIndex = $('*').index($(val));
     if (thisIndex < valIndex && valIndex < selIndex) {
       selIndex = valIndex;
       $result = $(val);
     }
   });
   return $result;
 }; 
})( jQuery );
</script>